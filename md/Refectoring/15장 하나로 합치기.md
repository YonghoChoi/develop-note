# 15장 하나로 합치기

* 리팩토링을 배웠고, 리팩토링 카탈로그를 공부했으며, 모든 체크리스트를 연습하고, 테스트에도 익숙해졌지만, 단지 시작일 뿐이다.
* 훌륭한 리팩토링 기법들을 언제 사용하고 언제 사용하지 말아야 할지, 언제 시작하고 언제 멈추어야 할지, 그리고 언제 계속하고 언제 기다려야 할지를 모르기 때문이다.
* 이것은 하나하나의 주의사항이 아니라 리팩토링을 가능하게 하는 리듬이다.

## 목표를 잡는데 익숙해져라

* 코드의 어디에선가 나쁜 냄새가 나면, 그 문제를 해결하겠다는 결심을 하고, 목표를 향해 전진하라.

## 확실하지 않을 때는 멈추어라

* 지금 하고 있는 작업이 프로그램의 의미 체계(semantics)를 그대로 보존하는 것인지 확신할 수 없을 때 중단하라.
* 코드가 이미 더 나아졌으면 진행한 결과를 반영하고, 그렇지 않으면 변경한 것을 버려라.

## 왔던 길로 되돌아가기(Back track)

* 테스트가 실패하고, 변경한 것 중 어떤 것이 문제를 일으키는지 찾을 수 없을 때.
* 개발자는 흥분하여 문제에서 빠져 나오기 위해 디버깅을 할 것이다.
* 결국 처음부터 다시 테스트를 하게 된다.
* 이미 자제력을 잃은 상태이고, 작업을 계속 진행해서 프로그램을 다시 동작하도록 하는데 어떤 대가를 치러야 하는지도 알지 못한다.
* 제대로 실행되는 것 중 가장 최근의 것으로 되돌리고, 변경을 하나씩 다시 하고 변경할 때마다 테스트를 실행하라.

## 듀엣(Duets)

* 다른 사람과 함께 리팩토링을 하라.
* 모든 종류의 개발에서 짝을 이루어 작업하는 것은 많은 이점이 있다.
* 리팩토링을 할때는 주의깊게, 일정한 방식에 따라 작업하는 것이 중요하다.
* 파트너는 여러분이 보지 못한 것을 보고, 알지 못하는 것을 알려줄 수 있다.
* 파트너가 여러분이 하고 있는 작업을 이해하지 못한다면, 이것은 자신 또한 제대로 이해하고 있지 못하다는 확실한 신호이다. 이 때는 리팩토링 작업을 그만 두어야 한다.
* 어떤 일이 일어날지에 대해 자신의 생각을 이야기하여 파트너와 같은 방향으로 일을 진행할 수 있다.
* 코드에서 나는 냄새와 그 냄새를 제거할 리팩토링을 알게 되면, 그 코드를 가지고 몇 년 동안 작업을 하고 있었다 하더라도, 그 코드에서 새로운 가능성을 보게 될 것이다.
* 지금 보기 고약하더라도, 자신을 단련하여 문제를 조금씩 해결해 나가도록 하라.
* 새로운 기능을 추가하려고 할 때는, 먼저 몇 분 정도를 투자해서 코드를 정리하라.
* 리팩토링을 할 때, 필연적으로 코드가 제대로 작동하지 않는 경우를 발견할 것이다.
* 리팩토링을 할 때 목표는 그 코드가 처음 발견했을 때와 완전히 동일하게 같은 결과를 내도록 남겨두는 것이다.